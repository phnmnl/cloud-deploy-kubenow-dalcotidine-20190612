
# Declare variables to be passed into your templates.

init:
  image:
    repository: "{{ galaxy_init_image }}"
    tag: "{{ galaxy_init_image_tag }}"
    pullPolicy: IfNotPresent
  force_copy: "__venv__,__config__,__galaxy-central__,__tools__,__welcome__"

image:
  repository: "{{ galaxy_image }}"
  tag: "{{ galaxy_image_tag }}"
  pullPolicy: IfNotPresent

admin:
  email: "{{ galaxy_admin_email }}"
  password: "{{ galaxy_admin_password }}"
  api_key: "{{ galaxy_api_key }}"
  username: admin

galaxy_conf:
  brand: "PhenoMeNal"
  admin_users: "{{ galaxy_admin_email }}"
  allow_user_creation: "False"
  allow_user_deletion: "False"
  cleanup_job: never
  enable_beta_mulled_containers: true
  url: "{{ hostname }}.{{ domain }}"

job_conf:
  runners:
    enable_local: "true"
    enable_k8: "true"

k8s:
  supp_groups: 0
  fs_group: 0

persistence:
  enabled: "true"
  existingClaim: "{{ galaxy_pvc }}"

service:
  type: NodePort

ingress:
  enabled: "true"
  self_managed: "true"
  hosts: [ "{{ hostname }}" ]
  domain: "{{ domain }}"
  annotations:
    # kubernetes.io/ingress.class: nginx
    # kubernetes.io/tls-acme: "true"
  tls:
    # Secrets must be manually created in the namespace.
    # - secretName: chart-example-tls
    #   hosts:
    #     - chart-example.local

resources:
  limits:
    cpu: "{{ galaxy_res_limits_cpu }}"
    memory: "{{ galaxy_res_limits_memory }}"
  requests:
    cpu: "{{ galaxy_res_requests_cpu }}"
    memory: "{{ galaxy_res_requests_memory }}"

postgresql:
  enabled: "true"
  image: "{{ postgres_image }}"
  imageTag: "{{ postgres_image_tag }}"
  postgresPassword: "{{ galaxy_admin_password }}"
  persistence:
    subPath: "postgres"

proftpd:
  image:
    repository: "{{ proftpd_image }}"
    tag: "{{ proftpd_image_tag }}"
  generate_ssh_key: "true"
  service:
    type: NodePort

rbac:
  enabled: true
